---
name: Add CLI Argument Support for Thinking Tokens
status: open
created: 2025-09-24T00:23:41Z
updated: 2025-09-24T00:33:22Z
github: https://github.com/Linuxdazhao/cc_auto_switch/issues/14
depends_on: [13]
parallel: true
conflicts_with: []
---

# Task: Add CLI Argument Support for Thinking Tokens

## Description

Extend the CLI interface in `src/cmd/cli.rs` to support the `--max-thinking-tokens` argument for the add command. Follow existing patterns for optional model parameters to maintain consistency with current CLI design.

## Acceptance Criteria

- [ ] Add `--max-thinking-tokens` argument to AddCommand struct
- [ ] Include appropriate help text explaining thinking token limits
- [ ] Support short flag `-T` for convenience
- [ ] Validate numeric input ranges (1024-32000)
- [ ] Integration with existing add command workflows
- [ ] Help text follows existing style and format
- [ ] Argument works in both interactive and non-interactive modes

## Technical Details

**Implementation Approach:**
- Add argument to AddCommand struct around line 93 in `src/cmd/cli.rs`
- Follow pattern used by `small_fast_model` argument
- Include clap validation attributes for numeric range
- Add descriptive help text mentioning token limits and cost implications

**Code Locations:**
- `src/cmd/cli.rs`: AddCommand struct (lines 84-93)
- Consider help text updates in main CLI structure

**Key Considerations:**
- Use clap's built-in numeric validation for u32 type
- Help text should mention valid range (1024-32000)
- Maintain consistency with existing argument naming patterns
- Support both flag-based and interactive mode usage

## Dependencies

- [ ] Task 001: Configuration struct must have max_thinking_tokens field

## Effort Estimate

- **Size**: S
- **Hours**: 2-3 hours
- **Parallel**: true (can work alongside environment management)

## Definition of Done

- [ ] CLI argument parsing implemented
- [ ] Help text includes clear usage examples
- [ ] Integration with add command workflow
- [ ] Numeric validation prevents invalid values
- [ ] Both short and long flag options work
- [ ] Interactive mode properly prompts for thinking tokens
- [ ] Error messages for invalid input are helpful and clear
